# Archivo de configuración para Mosquitto Broker

# --- Persistencia ---
# Guarda los mensajes retenidos y las suscripciones en un archivo de base de datos.
persistence true
persistence_location /mosquitto/data/

# --- Logging ---
# Define el destino de los logs.
log_dest file /mosquitto/log/mosquitto.log
log_type all

# --- Listeners ---
# Puerto estándar para MQTT sin encriptación.
listener 1883

# Puerto para MQTT sobre WebSockets.
listener 9001
protocol websockets

# --- Seguridad ---
# Deshabilitar clientes anónimos para forzar la autenticación.
# Para este ejemplo se permite, pero en producción se recomienda 'false'.
allow_anonymous true

# Para habilitar autenticación, descomente las siguientes líneas y cree el archivo de contraseñas.
# password_file /mosquitto/config/password.txt
# allow_anonymous false

# --- Listener para WSS (WebSockets Seguros) ---
listener 8883
protocol websockets
certfile /mosquitto/config/server.crt
keyfile /mosquitto/config/server.key